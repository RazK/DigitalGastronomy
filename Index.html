<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/noUiSlider/nouislider.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<container>
    <header>
        <!DOCTYPE html>
        <meta charset="utf-8">
        <body>
        <script src="//d3js.org/d3.v3.min.js"></script>
        <script>

            var maxRadius = 40, // maximum radius of circle
                padding = 20, // padding between circles; also minimum radius
                margin = {top: -maxRadius, right: -maxRadius, bottom: -maxRadius, left: -maxRadius},
                width = (960 - margin.left - margin.right)/2,
                height = 500 - margin.top - margin.bottom;

            var k = 1, // initial number of candidates to consider per circle
                m = 10, // initial number of circles to add per frame
                n = 1500, // remaining number of circles to add
                newCircle = bestCircleGenerator(maxRadius, padding);

            var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            d3.timer(function() {
                for (var i = 0; i < m && --n >= 0; ++i) {
                    var circle = newCircle(k);
                    if (circle != null) {
                        svg.append("circle")
                            .attr("cx", circle[0])
                            .attr("cy", circle[1])
                            .attr("r", 0)
                            .style("fill-opacity", (Math.random() + .5) / 2)
                            .transition()
                            .attr("r", circle[2]);

                        // As we add more circles, generate more candidates per circle.
                        // Since this takes more effort, gradually reduce circles per frame.
                        if (k < 500) k *= 1.01, m *= .998;
                    }
                }
                return !n;
            });

            function isPointInCircle(point_x, point_y, circle_x, circle_y, circle_radius){
                return Math.sqrt((point_x-circle_x)**2 + (point_y-circle_y)**2) <= circle_radius
            }

            function bestCircleGenerator(maxRadius, padding) {
                var quadtree = d3.geom.quadtree().extent([[0, 0], [width, height]])([]),
                    searchRadius = maxRadius * 2,
                    maxRadius2 = maxRadius * maxRadius;

                return function(k) {
                    var bestX, bestY, bestDistance = 0;

                    for (var i = 0; i < k || bestDistance < padding; ++i) {
                        var x = Math.random() * width,
                            y = Math.random() * height,
                            rx1 = x - searchRadius,
                            rx2 = x + searchRadius,
                            ry1 = y - searchRadius,
                            ry2 = y + searchRadius,
                            minDistance = maxRadius; // minimum distance for this candidate

                        quadtree.visit(function(quad, x1, y1, x2, y2) {
                            if (p = quad.point) {
                                var p,
                                    dx = x - p[0],
                                    dy = y - p[1],
                                    d2 = dx * dx + dy * dy,
                                    r2 = p[2] * p[2];
                                if (d2 < r2) return minDistance = 0, true; // within a circle
                                var d = Math.sqrt(d2) - p[2];
                                if (d < minDistance) minDistance = d;
                            }
                            return !minDistance || x1 > rx2 || x2 < rx1 || y1 > ry2 || y2 < ry1; // or outside search radius
                        });

                        if (minDistance > bestDistance) bestX = x, bestY = y, bestDistance = minDistance;
                    }

                    var best = [bestX, bestY, bestDistance];// - padding];
                    if (isPointInCircle(bestX, bestY, width/2, height/2, Math.min(width, height)/3)){
                        quadtree.add(best);
                        return best;
                    }
                    return null;
                };
            }

        </script>
    </header>
    <main>
        <div id="test-swipe-1" class="col s12">Test 1
            <div class="row center">
                <img class="responsive-img center" src="images/noodle.jpg" style="max-width: 150px; alignment: center;">
            </div>
            <div class="row">



                <div id="slider"></div>
            </div>
            <p> bla bla</p>
            <p> bly bly</p>
            <div class="row">
                <a class="waves-effect waves-light btn col s3">ANCHORS</a>
                <a class="waves-effect waves-light btn col s3">EVEN</a>
                <a class="waves-effect waves-light btn col s3">CENTERED</a>
                <a class="waves-effect waves-light btn col s3">RANDOM</a>
            </div>
        </div>


        <div id="test-swipe-2" class="col s12">
            <a>2</a>
            <div class="row center">
                <!--<img class="responsive-img center" src="images/noodle2.jpg" style="max-width: 150px; alignment: center;">-->
                <canvas id="myCanvas" width="1000" height="1000"></canvas>

            </div>
            <br>
            <div class="center">

                <div id="slider2"></div>
                <label class="sour"> SOUR</label>
                <label class = "spicy"> SPICY</label>
                <label class= "herbs"> HERBS</label>
                <label class= "omami"> OMAMI</label>
            </div>

        </div>

        <div id="test-swipe-3" class="col s12">Test 3
            <canvas id='canvas' width='400' height='400'></canvas>
            <div>
                <label>Circles <input id='c' type='range' value='10' min='1' max='100' step='1'></label><br/>
                <label>Ratio <input id='r' type='range' value='1' min='.5' max='1.5' step='0.1'></label><br/>
                <label>min radius<input id='a' type='range' value='1' min='1' max='20' step='1'></label><br/>
                <label>max radius<input id='b' type='range' value='10' min='1' max='20' step='1'></label>
            </div>
            <button onclick='draw()'>Draw</button>

        </div>

    </main>
    <footer class="center col s12">
        <ul id="tabs-swipe-demo" class="tabs">
            <li class="tab col s3">
                <a class="active" href="#test-swipe-1">Test 1</a>
            </li>
            <li class="tab col s3">
                <a class="active" href="#test-swipe-2">Test 2</a>
            </li>
            <li class="tab col s3">
                <a class="active" href="#test-swipe-3">Test 3</a>
            </li>
        </ul>
    </footer>
</container>
<!-- Compiled and minified JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
<script src="assets/noUiSlider/nouislider.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.js"></script>
<script src="https://d3js.org/d3.v5.min.js"></script>
    <!--<script src="//d3js.org/d3.v3.min.js"></script>-->

                <script src="js/app.js"></script>

</body>
</html>